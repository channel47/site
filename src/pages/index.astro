---
/**
 * Homepage — AI plugins for media buyers.
 *
 * Density: LOW (hero) → HIGH (proof bar) → MEDIUM (plugin showcase) →
 *          MEDIUM (value grid) → RUPTURE → MEDIUM (product) → LOW (CTA void)
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import EmailSignup from '../components/EmailSignup.astro';
import ProductCallout from '../components/ProductCallout.astro';

const schema = [
  {
    '@type': 'Organization',
    'name': 'Channel 47',
    'url': 'https://channel47.dev',
    'logo': 'https://channel47.dev/og-image.png',
    'description': 'AI plugins for media buyers. Platform-specific plugins for Paid Search, Meta Ads, and TikTok.',
    'founder': {
      '@type': 'Person',
      'name': 'Jackson Dean',
      'url': 'https://x.com/ctrlswing',
    },
    'sameAs': [
      'https://github.com/channel47',
      'https://x.com/ctrlswing',
    ],
  },
  {
    '@type': 'WebSite',
    'name': 'Channel 47',
    'url': 'https://channel47.dev',
  },
];
---

<BaseLayout
  title="Channel 47 — AI Plugins for Media Buyers"
  description="Platform-specific AI plugins for Paid Search, Meta Ads, and TikTok. Install and run. Build your own."
  schema={schema}
>
  <Nav />

  <main id="main-content">

    <!-- ═══════ HERO — LOW density ═══════ -->
    <section class="hero is-visible">
      <div class="hero__inner">
        <div class="hero__bar" aria-hidden="true"></div>
        <p class="label hero__label">Transmitting</p>
        <h1 class="hero__headline">AI plugins for<br />media buyers.</h1>
        <p class="hero__sub">
          Platform-specific plugins for Paid Search, Meta Ads, and TikTok.<br />
          Install and run. Or learn to build your own.
        </p>
        <div class="hero__cta">
          <EmailSignup variant="inline" placeholder="you@domain.com" tag="home" submitText="Subscribe" />
          <p class="hero__hint">One email a week. Unsubscribe anytime.</p>
        </div>
      </div>
    </section>

    <!-- ═══════ PROOF BAR — HIGH density ═══════ -->
    <section class="proof-bar" data-reveal-stagger>
      <div class="proof-bar__item" data-reveal-child data-stagger="1">
        <span class="proof-bar__value" data-counter="25">25<span class="text-signal">+</span></span>
        <span class="proof-bar__label">Accounts Managed</span>
      </div>
      <div class="proof-bar__item" data-reveal-child data-stagger="2">
        <span class="proof-bar__value proof-bar__value--signal" data-counter="3">3</span>
        <span class="proof-bar__label">Platforms</span>
      </div>
      <div class="proof-bar__item" data-reveal-child data-stagger="3">
        <span class="proof-bar__value">Weekly</span>
        <span class="proof-bar__label">Updates</span>
      </div>
      <div class="proof-bar__item" data-reveal-child data-stagger="4">
        <span class="proof-bar__value">500+</span>
        <span class="proof-bar__label">Builders</span>
      </div>
    </section>

    <!-- ═══════ PLUGIN SHOWCASE — MEDIUM density ═══════ -->
    <section class="plugin-showcase" data-reveal-stagger>
      <div class="wrap">
        <p class="label mb-8" data-reveal-child data-stagger="1">Plugins</p>

        <!-- Featured: Paid Search (LIVE) -->
        <div class="plugin-showcase__featured" data-reveal-child data-stagger="2">
          <div class="plugin-showcase__featured-header">
            <span class="plugin-badge plugin-badge--live">Live</span>
            <h3 class="plugin-showcase__name">Paid Search</h3>
          </div>
          <p class="plugin-showcase__desc">
            Complete toolkit for Google Ads and Bing Ads. 6 skills, 2 MCP servers, safety hooks. Built from managing 25+ accounts daily.
          </p>
          <div class="plugin-showcase__install">
            <code>/plugin install paid-search@channel47</code>
            <button
              class="plugin-showcase__copy"
              data-install="/plugin install paid-search@channel47"
              aria-label="Copy install command"
            >Copy</button>
          </div>
          <a href="/plugins/paid-search" class="plugin-showcase__link">View plugin details</a>
        </div>

        <!-- Teaser grid: Meta Ads + TikTok Ads -->
        <div class="plugin-showcase__teasers" data-reveal-child data-stagger="3">
          <div class="plugin-showcase__teaser">
            <span class="plugin-badge plugin-badge--dev">In Development</span>
            <h3 class="plugin-showcase__teaser-name">Meta Ads</h3>
            <p class="plugin-showcase__teaser-desc">6 skills structured. Awaiting MCP server.</p>
            <EmailSignup variant="inline" placeholder="you@domain.com" tag="meta-ads" submitText="Notify me" />
          </div>
          <div class="plugin-showcase__teaser">
            <span class="plugin-badge plugin-badge--soon">Coming Soon</span>
            <h3 class="plugin-showcase__teaser-name">TikTok Ads</h3>
            <p class="plugin-showcase__teaser-desc">Campaign management plugin on the roadmap.</p>
            <EmailSignup variant="inline" placeholder="you@domain.com" tag="tiktok-ads" submitText="Notify me" />
          </div>
        </div>
      </div>
    </section>

    <!-- ═══════ VALUE GRID — MEDIUM density ═══════ -->
    <section class="value-grid">
      <div class="wrap">
        <div class="value-grid__grid" data-reveal-stagger>
          <div class="value-grid__cell value-grid__cell--soot" data-reveal-child data-stagger="1">
            <span class="value-grid__idx">001</span>
            <h3 class="value-grid__title">One plugin per platform</h3>
            <p class="value-grid__desc">
              Not a flat list. Each plugin bundles skills, scripts, API connections, and safety hooks for one ad platform. Install once, get everything.
            </p>
          </div>
          <div class="value-grid__cell value-grid__cell--smoke" data-reveal-child data-stagger="2">
            <span class="value-grid__idx">002</span>
            <h3 class="value-grid__title">Skills + scripts + APIs</h3>
            <p class="value-grid__desc">
              Knowledge tells AI how to think. Scripts give AI hands. API connections let AI see live data. Plugins bundle all three.
            </p>
          </div>
          <div class="value-grid__cell value-grid__cell--smoke value-grid__cell--accent" data-reveal-child data-stagger="3">
            <span class="value-grid__idx">003</span>
            <h3 class="value-grid__title">Built from real workflows</h3>
            <p class="value-grid__desc">
              The paid-search plugin caught ~$3K/month in wasted spend across two accounts. Pacing alerts flagged a budget issue 4 days before the client noticed. Built from managing 25+ accounts daily.
            </p>
          </div>
          <div class="value-grid__cell value-grid__cell--soot" data-reveal-child data-stagger="4">
            <span class="value-grid__idx">047</span>
            <h3 class="value-grid__title">Learn to build your own</h3>
            <p class="value-grid__desc">
              Every tool here was built from a real workflow.
              <a
                href="/notes"
                class="text-signal underline underline-offset-2 hover:brightness-110 transition-[filter]"
              >
                Follow the build notes
              </a>
              to understand how, then build skills for your own domain.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ═══════ RUPTURE — surface flip ═══════ -->
    <section class="rupture" data-reveal>
      <div class="rupture__inner">
        <div class="rupture__bar"></div>
        <p class="label label--muted" style="margin-bottom: 20px;">Signal</p>
        <h2 class="rupture__headline">The people who build skills become the most valuable people in their field.</h2>
        <p class="rupture__body">
          Every tool here was built from a real workflow. Install and run, or learn how it's made and build your own.
        </p>
        <a href="/plugins" class="rupture__link">Browse all tools</a>
      </div>
    </section>

    <!-- ═══════ PRODUCT CALLOUT — MEDIUM density ═══════ -->
    <ProductCallout />

    <!-- ═══════ CTA VOID — LOW density ═══════ -->
    <section class="cta" data-reveal>
      <p class="label cta__label">ch47</p>
      <a href="/plugins" class="cta__headline">Browse the tools.</a>
      <a href="/subscribe" class="btn-signal">Get Build Notes</a>
    </section>

    <Footer />
  </main>
</BaseLayout>

<style>
  /* ═══════ PLUGIN SHOWCASE ═══════ */
  .plugin-showcase {
    padding: clamp(72px, 14vh, 140px) 0;
    border-top: 1px solid var(--color-smoke);
  }

  /* Featured card */
  .plugin-showcase__featured {
    border: 1px dashed var(--color-signal-dim);
    border-radius: var(--radius-tight);
    padding: clamp(24px, 4vw, 40px);
    background: var(--color-soot);
    margin-bottom: 1px;
    transition: border-color var(--dur-quick) var(--ease-out),
                box-shadow var(--dur-quick) var(--ease-out);
  }
  .plugin-showcase__featured:hover {
    border-color: var(--color-signal);
    box-shadow: 0 0 32px rgba(245, 158, 11, 0.06);
  }
  .plugin-showcase__featured-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }
  .plugin-showcase__name {
    font-family: var(--font-family-display);
    font-size: clamp(1.25rem, 2.5vw, 1.75rem);
    font-weight: 600;
    letter-spacing: -0.02em;
    color: var(--color-chalk);
  }
  .plugin-showcase__desc {
    font-size: 14px;
    line-height: 1.7;
    color: var(--color-dust);
    max-width: 52ch;
    margin-bottom: 20px;
  }
  .plugin-showcase__install {
    position: relative;
    font-family: var(--font-family-mono);
    font-size: 13px;
    color: var(--color-dust);
    background: var(--color-void);
    border: 1px solid var(--color-smoke);
    border-radius: var(--radius-tight);
    padding: 12px 16px;
    padding-right: 72px;
    overflow-x: auto;
    margin-bottom: 16px;
  }
  .plugin-showcase__copy {
    position: absolute;
    top: 8px;
    right: 8px;
    font-family: var(--font-family-mono);
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-stone);
    background: var(--color-soot);
    border: 1px solid var(--color-smoke);
    border-radius: var(--radius-tight);
    padding: 4px 10px;
    cursor: pointer;
    transition: color var(--dur-instant) var(--ease-sharp);
  }
  .plugin-showcase__copy:hover { color: var(--color-signal); }
  .plugin-showcase__link {
    font-family: var(--font-family-mono);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--color-signal);
    transition: opacity var(--dur-instant) var(--ease-sharp);
  }
  .plugin-showcase__link:hover { opacity: 0.8; }
  .plugin-showcase__link:focus-visible {
    outline: 2px solid var(--color-signal);
    outline-offset: 2px;
    border-radius: var(--radius-tight);
  }

  /* Badges */
  .plugin-badge {
    display: inline-block;
    font-family: var(--font-family-mono);
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    padding: 3px 10px;
    border-radius: var(--radius-tight);
    line-height: 1.4;
  }
  .plugin-badge--live {
    background: var(--color-signal);
    color: var(--color-void);
  }
  .plugin-badge--dev {
    background: var(--color-signal-dim);
    color: var(--color-bone);
  }
  .plugin-badge--soon {
    background: var(--color-smoke);
    color: var(--color-stone);
  }

  /* Teaser grid */
  .plugin-showcase__teasers {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1px;
    margin-top: 1px;
  }
  .plugin-showcase__teaser {
    border: 1px solid var(--color-smoke);
    border-radius: var(--radius-tight);
    padding: clamp(20px, 3vw, 32px);
    background: var(--color-soot);
  }
  .plugin-showcase__teaser-name {
    font-family: var(--font-family-display);
    font-size: clamp(1rem, 2vw, 1.25rem);
    font-weight: 600;
    letter-spacing: -0.01em;
    color: var(--color-chalk);
    margin: 10px 0 8px;
  }
  .plugin-showcase__teaser-desc {
    font-family: var(--font-family-mono);
    font-size: 12px;
    line-height: 1.6;
    color: var(--color-stone);
    margin-bottom: 16px;
  }
  /* Constrain inline email forms inside teasers */
  .plugin-showcase__teaser :global(.email-form) {
    max-width: 100%;
  }

  @media (max-width: 768px) {
    .plugin-showcase__teasers {
      grid-template-columns: 1fr;
    }
  }

</style>

<script>
  function initShowcaseCopy() {
    document.querySelectorAll('.plugin-showcase__copy[data-install]').forEach(btn => {
      if (btn.hasAttribute('data-initialized')) return;
      btn.setAttribute('data-initialized', 'true');
      btn.addEventListener('click', async () => {
        const text = btn.getAttribute('data-install');
        if (!text) return;
        try {
          await navigator.clipboard.writeText(text);
          const el = btn as HTMLElement;
          el.textContent = 'Copied';
          setTimeout(() => { el.textContent = 'Copy'; }, 1500);
        } catch { /* clipboard API may fail in insecure contexts */ }
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initShowcaseCopy);
  } else {
    initShowcaseCopy();
  }
  document.addEventListener('astro:page-load', initShowcaseCopy);
</script>
