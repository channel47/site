---
/**
 * Homepage - Manifesto Landing Page
 *
 * A single, focused page to capture email signups.
 * Typography is the hero. Editorial elegance meets quiet confidence.
 *
 * Visual flow:
 * 1. Headline arrives with presence, blur revealing to sharp
 * 2. ASCII blocks field — signal emerging from noise
 * 3. Manifesto builds: hook → insight → resolution
 * 4. Email signup — natural next step
 * 5. Logo scrambles in as closing period mark / signature
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import Prose from '../components/Prose.astro';
import EmailSignup from '../components/EmailSignup.astro';
import LogoAnimated from '../components/LogoAnimated.astro';
import SocialLinks from '../components/SocialLinks.astro';
import AsciiBlocks from '../components/AsciiBlocks.astro';
---

<BaseLayout
  title="Channel47 — Same tools. Different outcomes."
  description="Open source AI tools and the knowledge to use them."
>
  <main class="page">
    <!-- Atmospheric orb - subtle warmth behind content -->
    <div class="atmosphere" aria-hidden="true">
      <div class="atmosphere__orb"></div>
    </div>

    <Prose width="default">
      <!-- Hero: The headline arrives with presence -->
      <header class="hero">
        <h1 class="hero__headline" data-animate="blur-in" data-stagger="1">
          <span class="hero__line">Same tools.</span>
          <span class="hero__line"><span class="nowrap">Different outcomes.</span></span>
        </h1>
      </header>

      <!-- Visual: ASCII blocks field - signal in noise -->
      <div class="visual" data-animate="fade-up" data-stagger="2">
        <AsciiBlocks />
      </div>

      <!-- Manifesto: Three beats with visual hierarchy -->
      <section class="manifesto">
        <p class="manifesto__lede" data-animate="fade-up" data-stagger="3">
          Everyone got access to AI.
          <span class="manifesto__accent">A few learned how to make it work.</span>
        </p>

        <p class="manifesto__insight" data-animate="fade-up" data-stagger="4">
          The gap is widening faster than it looks.
        </p>

        <p class="manifesto__resolution" data-animate="fade-up" data-stagger="5">
          We're sharing what we know. Open source tools, real techniques.
          Get in early.
        </p>
      </section>

      <!-- CTA: The natural next step -->
      <section class="cta" data-animate="fade-up" data-stagger="6">
        <EmailSignup tag="manifesto" />
      </section>

      <!-- Footer: Logo + Social as unified closing -->
      <footer class="page-footer" data-animate="fade-up" data-stagger="7">
        <div class="page-footer__logo">
          <LogoAnimated delay={200} />
        </div>
        <div class="page-footer__social">
          <SocialLinks />
        </div>
      </footer>
    </Prose>
  </main>
</BaseLayout>

<style>
  /* =========================================
   * PAGE LAYOUT
   * Full viewport, left-aligned content
   * Mobile-first with safe-area support
   * ========================================= */
  .page {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    min-height: 100vh;
    min-height: 100dvh;
    /* Generous top padding for breathing room */
    padding-block-start: max(var(--space-14), env(safe-area-inset-top, 0px) + var(--space-8));
    padding-block-end: max(var(--space-16), env(safe-area-inset-bottom, 0px) + var(--space-10));
    position: relative;
    isolation: isolate;
  }

  @media (min-width: 480px) {
    .page {
      padding-block-start: var(--space-16);
      padding-block-end: var(--space-20);
    }
  }

  @media (min-width: 768px) {
    .page {
      padding-block-start: var(--space-20);
      padding-block-end: var(--space-24);
    }
  }

  @media (min-width: 1024px) {
    .page {
      padding-block-start: var(--space-24);
    }
  }

  /* On taller viewports, use percentage-based top padding */
  @media (min-height: 800px) {
    .page {
      padding-block-start: 10vh;
    }
  }

  @media (min-height: 900px) {
    .page {
      padding-block-start: 12vh;
    }
  }

  @media (min-height: 1000px) {
    .page {
      padding-block-start: 14vh;
    }
  }

  /* =========================================
   * ATMOSPHERE
   * Subtle orb effect for depth
   * ========================================= */
  .atmosphere {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    overflow: hidden;
  }

  .atmosphere__orb {
    position: absolute;
    top: 5%;
    left: 20%;
    transform: translateX(-50%);
    width: min(900px, 120vw);
    height: min(700px, 90vh);
    background: radial-gradient(
      ellipse 100% 100% at 50% 30%,
      oklch(25% 0.04 35 / 0.35) 0%,
      oklch(20% 0.02 35 / 0.15) 40%,
      transparent 70%
    );
    filter: blur(80px);
    animation: orb-pulse 20s ease-in-out infinite;
  }

  @keyframes orb-pulse {
    0%, 100% {
      opacity: 0.5;
      transform: translateX(-50%) scale(1);
    }
    50% {
      opacity: 0.7;
      transform: translateX(-50%) scale(1.08);
    }
  }

  /* =========================================
   * HERO
   * The headline dominates with presence
   * Left-aligned throughout for editorial consistency
   * ========================================= */
  .hero {
    text-align: left;
    margin-bottom: var(--space-12);
  }

  @media (min-width: 480px) {
    .hero {
      margin-bottom: var(--space-14);
    }
  }

  @media (min-width: 768px) {
    .hero {
      margin-bottom: var(--space-16);
    }
  }

  @media (min-width: 1024px) {
    .hero {
      margin-bottom: var(--space-20);
    }
  }

  .hero__headline {
    font-family: var(--font-display);
    /* Mobile-first: conservative sizing that scales up */
    font-size: clamp(1.75rem, 6vw + 0.5rem, 2.5rem);
    font-weight: var(--font-bold);
    letter-spacing: var(--tracking-tight);
    line-height: var(--leading-tight);
    color: var(--color-fg);
    margin: 0;
    text-wrap: balance;
  }

  @media (min-width: 480px) {
    .hero__headline {
      font-size: clamp(2rem, 5vw + 0.75rem, 3rem);
      letter-spacing: var(--optical-2xl);
    }
  }

  @media (min-width: 768px) {
    .hero__headline {
      font-size: var(--fluid-5xl);
      letter-spacing: var(--optical-display);
    }
  }

  @media (min-width: 1024px) {
    .hero__headline {
      font-size: var(--fluid-6xl);
      letter-spacing: var(--optical-hero);
    }
  }

  .hero__line {
    display: block;
  }

  /* Allow wrapping on very narrow screens */
  @media (max-width: 359px) {
    .hero__line .nowrap {
      white-space: normal;
    }
  }

  /* =========================================
   * VISUAL
   * The ASCII blocks animation
   * Full-bleed on mobile, breaks out on desktop
   * ========================================= */
  .visual {
    /* Slightly reduced breakout on small mobile for visual balance */
    --visual-inset: calc(var(--padding-mobile) * 0.6);
    margin-left: calc(-1 * var(--visual-inset));
    margin-right: calc(-1 * var(--visual-inset));
    width: calc(100% + 2 * var(--visual-inset));
    margin-bottom: var(--space-14);
  }

  @media (min-width: 480px) {
    .visual {
      /* Full bleed at larger mobile sizes */
      margin-left: calc(-1 * var(--padding-mobile));
      margin-right: calc(-1 * var(--padding-mobile));
      width: calc(100% + 2 * var(--padding-mobile));
      margin-bottom: var(--space-16);
    }
  }

  @media (min-width: 768px) {
    .visual {
      margin-left: calc(-1 * var(--padding-tablet));
      margin-right: calc(-1 * var(--padding-tablet));
      width: calc(100% + 2 * var(--padding-tablet));
      margin-bottom: var(--space-20);
    }
  }

  @media (min-width: 1024px) {
    .visual {
      /* Break out significantly wider than content */
      --visual-extra-width: var(--space-32);
      margin-left: calc(-1 * var(--padding-desktop) - var(--visual-extra-width));
      margin-right: calc(-1 * var(--padding-desktop) - var(--visual-extra-width));
      width: calc(100% + 2 * var(--padding-desktop) + 2 * var(--visual-extra-width));
      margin-bottom: var(--space-24);
    }
  }

  @media (min-width: 1280px) {
    .visual {
      /* Even wider on large screens */
      --visual-extra-width: 10vw;
      margin-left: calc(-1 * var(--padding-desktop) - var(--visual-extra-width));
      margin-right: calc(-1 * var(--padding-desktop) - var(--visual-extra-width));
      width: calc(100% + 2 * var(--padding-desktop) + 2 * var(--visual-extra-width));
      margin-bottom: var(--space-28);
    }
  }

  /* =========================================
   * MANIFESTO
   * Three beats: hook, insight, resolution
   * ========================================= */
  .manifesto {
    text-align: left;
    margin-bottom: var(--space-6);
    max-width: 100%;
  }

  @media (min-width: 480px) {
    .manifesto {
      margin-bottom: var(--space-7);
      max-width: 480px;
    }
  }

  @media (min-width: 768px) {
    .manifesto {
      margin-bottom: var(--space-8);
      max-width: 540px;
    }
  }

  @media (min-width: 1024px) {
    .manifesto {
      margin-bottom: var(--space-10);
    }
  }

  /* Manifesto paragraphs - fluid, readable body copy */
  .manifesto__lede,
  .manifesto__insight,
  .manifesto__resolution {
    font-family: var(--font-serif);
    font-size: var(--fluid-md);
    font-weight: var(--font-normal);
    color: var(--color-fg-secondary);
    line-height: var(--leading-prose);
    letter-spacing: var(--tracking-normal);
    margin: 0 0 var(--paragraph-spacing) 0;
    max-width: var(--measure-prose);
  }

  .manifesto__resolution {
    margin-bottom: 0;
  }

  @media (min-width: 768px) {
    .manifesto__lede,
    .manifesto__insight,
    .manifesto__resolution {
      font-size: var(--fluid-lg);
    }
  }

  /* Accent text with gradient effect */
  .manifesto__accent {
    background: var(--text-gradient-subtle);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Insight gets subtle emphasis */
  .manifesto__insight {
    font-weight: var(--font-medium);
    color: var(--color-fg);
  }

  /* Resolution slightly muted but hopeful */
  .manifesto__resolution {
    color: var(--color-fg-muted);
  }

  /* =========================================
   * CTA
   * The natural next step - left aligned
   * No bottom margin - footer handles separation
   * ========================================= */
  .cta {
    text-align: left;
  }

  /* =========================================
   * FOOTER
   * Logo + social as unified closing zone
   * Generous top margin ensures it's below fold
   * ========================================= */
  .page-footer {
    margin-top: var(--space-32);
    padding-top: var(--space-10);
    border-top: 1px solid oklch(50% 0 0 / 0.08);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-5);
  }

  @media (min-width: 480px) {
    .page-footer {
      margin-top: var(--space-36);
      padding-top: var(--space-12);
      gap: var(--space-6);
    }
  }

  @media (min-width: 768px) {
    .page-footer {
      margin-top: var(--space-40);
      padding-top: var(--space-14);
      flex-direction: row;
      align-items: center;
      /* Keep grouped left, matching content alignment */
      gap: var(--space-10);
    }
  }

  @media (min-width: 1024px) {
    .page-footer {
      margin-top: 12rem;
      padding-top: var(--space-16);
    }
  }

  .page-footer__logo {
    /* Let the logo shine at full brightness */
  }

  /* Larger tap target for logo on touch devices */
  @media (pointer: coarse) {
    .page-footer__logo {
      padding: var(--space-2);
      margin: calc(-1 * var(--space-2));
    }
  }

  .page-footer__social {
    opacity: 0.5;
    transition: opacity var(--duration-fast) var(--ease-out);
  }

  .page-footer__social:hover {
    opacity: 0.8;
  }

  /* =========================================
   * UTILITIES
   * ========================================= */
  .nowrap {
    white-space: nowrap;
  }

  /* =========================================
   * REDUCED MOTION
   * ========================================= */
  @media (prefers-reduced-motion: reduce) {
    .atmosphere__orb {
      animation: none;
      opacity: 0.5;
    }
  }
</style>
