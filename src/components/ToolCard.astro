---
/**
 * ToolCard â€” two variants:
 * - compact: Homepage directory row (index, name, type badge, arrow, no description)
 * - default: Hub pages (full row with description)
 */
interface Props {
  name: string;
  description: string;
  type: 'skill' | 'mcp' | 'subagent' | 'plugin';
  href: string;
  index?: number;
  variant?: 'compact' | 'default';
}

const { name, description, type, href, index, variant = 'default' } = Astro.props;

const typeLabels: Record<string, string> = {
  skill: 'SKILL',
  mcp: 'MCP',
  subagent: 'SUBAGENT',
  plugin: 'PLUGIN',
};

const indexStr = index ? String(index).padStart(3, '0') : undefined;
---

{variant === 'compact' ? (
  <!-- Compact: homepage directory row -->
  <li class="directory-row" data-type={type} data-name={name.toLowerCase()} data-description={description.toLowerCase()}>
    <a href={href} class="directory-row__link">
      {indexStr && <span class="directory-row__idx">{indexStr}</span>}
      <span class="directory-row__name">{name}</span>
      <span class="directory-row__type">{typeLabels[type]}</span>
      <span class="directory-row__arrow" aria-hidden="true">&rarr;</span>
    </a>
  </li>
) : (
  <!-- Default: hub page full row with description -->
  <a
    href={href}
    class="tool-card group block py-4 border-b border-smoke cursor-pointer card-hover focus-visible:ring-2 focus-visible:ring-signal focus-visible:outline-none rounded-tight"
    data-type={type}
    data-name={name.toLowerCase()}
    data-description={description.toLowerCase()}
  >
    <div class="flex items-start justify-between gap-4">
      <div class="flex items-start gap-3 min-w-0">
        {indexStr && (
          <span class="font-mono text-[11px] tracking-[0.08em] text-ash shrink-0 mt-0.5 hidden sm:inline">{indexStr}</span>
        )}
        <div class="min-w-0">
          <h3 class="font-mono text-sm text-chalk">{name}</h3>
          <p class="font-mono text-sm text-dust leading-relaxed tracking-wide mt-1">{description}</p>
        </div>
      </div>
      <div class="flex items-center gap-3 shrink-0 mt-0.5">
        <span class="font-mono text-[10px] font-medium tracking-[0.1em] uppercase text-signal bg-[var(--signal-dim-alpha)] px-2 py-0.5 rounded-tight">
          {typeLabels[type]}
        </span>
        <span class="font-mono text-sm text-ash transition-all duration-100 group-hover:text-signal group-hover:translate-x-0.5" aria-hidden="true">&rarr;</span>
      </div>
    </div>
  </a>
)}
