---
/**
 * ToolCard â€” two variants:
 * - compact: Homepage directory row (index, name, type badge, arrow, no description)
 * - default: Hub pages (full row with description, uses directory-row shared CSS)
 */
interface Props {
  name: string;
  description: string;
  type: 'skill' | 'mcp' | 'subagent' | 'plugin';
  href: string;
  index?: number;
  variant?: 'compact' | 'default';
  status?: 'live' | 'dev' | 'soon';
}

const { name, description, type, href, index, variant = 'default', status } = Astro.props;

const typeLabels: Record<string, string> = {
  skill: 'SKILL',
  mcp: 'MCP',
  subagent: 'SUBAGENT',
  plugin: 'PLUGIN',
};

const statusLabels: Record<string, string> = {
  live: 'Live',
  dev: 'In Dev',
  soon: 'Soon',
};

const indexStr = index ? String(index).padStart(3, '0') : undefined;
---

{variant === 'compact' ? (
  <!-- Compact: homepage directory row -->
  <li class="directory-row" data-type={type} data-name={name.toLowerCase()} data-description={description.toLowerCase()}>
    <a href={href} class="directory-row__link">
      {indexStr && <span class="directory-row__idx">{indexStr}</span>}
      <span class="directory-row__name">{name}</span>
      <span class="directory-row__type">{typeLabels[type]}</span>
    </a>
  </li>
) : (
  <!-- Default: hub page full row with description -->
  <div class="directory-row" data-type={type} data-name={name.toLowerCase()} data-description={description.toLowerCase()}>
    <a href={href} class="directory-row__link directory-row__link--full">
      <div class="directory-row__main">
        {indexStr && <span class="directory-row__idx">{indexStr}</span>}
        <div class="min-w-0">
          <span class="directory-row__name">{name}</span>
          <p class="directory-row__desc line-clamp-2 sm:line-clamp-none">{description}</p>
        </div>
      </div>
      <div class="flex items-center gap-3 shrink-0">
        {status && (
          <span class:list={[
            'directory-row__badge',
            status === 'live' && 'directory-row__badge--live',
            status === 'dev' && 'directory-row__badge--dev',
            status === 'soon' && 'directory-row__badge--soon',
          ]}>{statusLabels[status]}</span>
        )}
        <span class="directory-row__type">{typeLabels[type]}</span>
      </div>
    </a>
  </div>
)}
