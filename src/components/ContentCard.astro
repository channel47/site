---
/**
 * ContentCard â€” reusable note card for /notes grid and homepage feature.
 * Tag pill, title, date, description. Links to /notes/{slug}.
 */

interface Props {
  title: string;
  description: string;
  date: Date;
  tag: 'breakdown' | 'story' | 'guide';
  slug: string;
  class?: string;
}

const { title, description, date, tag, slug, class: className } = Astro.props;

const formatted = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});

const tagLabel = tag.toUpperCase();
const isBreakdown = tag === 'breakdown';
---

<a href={`/notes/${slug}`} class:list={['block py-5 border-b border-gray-200 transition-colors duration-100 hover:border-amber group', className]}>
  <div class="flex items-center gap-3 mb-2">
    <span class:list={[
      'font-mono text-[10px] font-semibold tracking-[0.15em] uppercase px-2 py-0.5 rounded-tight',
      isBreakdown ? 'bg-[var(--amber-dim)] text-amber' : 'bg-gray-100 text-gray-500'
    ]}>{tagLabel}</span>
    <time class="font-mono text-[11px] text-gray-500 tracking-wide" datetime={date.toISOString()}>{formatted}</time>
  </div>
  <h3 class="font-mono text-sm font-semibold text-primary tracking-tight mb-1 group-hover:text-amber transition-colors duration-100" style="font-family: var(--font-family-heading); font-size: clamp(1.1rem, 2vw, 1.35rem); letter-spacing: -0.02em; line-height: 1.2;">{title}</h3>
  <p class="font-mono text-[13px] text-gray-600 leading-relaxed tracking-wide line-clamp-2">{description}</p>
</a>
