---
/**
 * ContentCard â€” note card for /notes grid.
 * Tag pill, title, date, description. Links to /notes/{slug}.
 * Accent bar top, compound hover.
 */

interface Props {
  title: string;
  description: string;
  date: Date;
  tag: 'breakdown' | 'story' | 'guide';
  slug: string;
  class?: string;
}

const { title, description, date, tag, slug, class: className } = Astro.props;

const formatted = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'short',
  day: 'numeric',
});

const tagLabel = tag.toUpperCase();
const isBreakdown = tag === 'breakdown';
---

<a href={`/notes/${slug}`} class:list={['content-card block py-5 border-b border-smoke group', className]}>
  <div class="content-card__bar w-6 h-0.5 bg-signal/40 mb-3 transition-all duration-200 group-hover:w-10 group-hover:bg-signal" aria-hidden="true"></div>
  <div class="flex items-center gap-3 mb-2">
    <span class:list={[
      'font-mono text-[10px] font-semibold tracking-[0.15em] uppercase px-2 py-0.5 rounded-tight',
      isBreakdown ? 'bg-[var(--signal-dim-alpha)] text-signal' : 'bg-soot text-stone'
    ]}>{tagLabel}</span>
    <span class="w-px h-3 bg-ash" aria-hidden="true"></span>
    <time class="font-mono text-[11px] text-stone tracking-wide" datetime={date.toISOString()}>{formatted}</time>
  </div>
  <h3 class="font-mono text-sm font-semibold text-chalk tracking-tight mb-1 transition-colors duration-100 group-hover:text-signal" style="font-family: var(--font-family-display); font-size: clamp(1.1rem, 2vw, 1.35rem); letter-spacing: -0.02em; line-height: 1.2;">{title}</h3>
  <p class="font-mono text-[13px] text-dust leading-relaxed tracking-wide line-clamp-2">{description}</p>
</a>

<style>
  .content-card {
    transition: border-color 150ms var(--ease-out);
  }
  .content-card:hover {
    border-color: rgba(245, 158, 11, 0.4);
  }
</style>
